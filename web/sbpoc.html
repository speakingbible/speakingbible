<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
<!--script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script-->
<!--script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script-->

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<!--script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script-->

</head>

<body>

<div class="wrapper">
<div class="profile">
   <div id= "userdata" border="2">
      <p>
      </p>
   </div>
<div>
<audio id="spbibaudio" controls preload="auto">
  <source src="43Joh001.mp3" type="audio/mpeg">

</audio>
</div>
<div><span>Speed</span>
<span><select id="speed">
  <option value="1">1.X</option>
  <option value="0.9">0.9X</option>
  <option value="0.8">0.8X</option>
  <option value="0.7">0.7X</option>
    <option value="0.6">0.6X</option>
  <option value="0.5">0.5X</option>
  <option value="0.4">0.4X</option>
  <option value="0.3">0.3X</option>
  <option value="0.2">0.2X</option>  
  <option value="0.1">0.1X</option>
</select></span>
<span><button id="spbibaudio" type="button">Check Speed</button> </span>
</div>
</div>
<script type="text/javascript">

$(document).ready(function() {
var jsonWords = "";
$(function() {


   var people = [];
   $.getJSON('word.json', function(data) {
   jsonWords = data;
       $.each(data.Verses, function(i,f) {
          var tblRow = "<i onclick='replayWord(this)' id='" + f.strt + "'>" + f.word + " </i> "
           $(tblRow).appendTo("#userdata p");
     });
   });

});

  /*$("i").click(function() {
      alert( "Handler for .click() called." );
      var iid = $(this).attr("id");
      alert(iid);
	  //alert(jsonWords);
     //alert(event.target.id);
    });*/
	$("#spbibaudio").bind("timeupdate", function() {
		var currentTimeInMillis  = this.currentTime*1000;
        //alert(currentTimeInMillis);
		//var mydata = JSON.parse("Verses"");
		var prevWordStrTime = "";
		$.each(jsonWords.Verses, function(i,f) {
		 var startTime  = f.strt;
		 var endTime = f.end;
		 prevWordStrTime = startTime;
		 //alert(f.strt);
		 if(parseInt(currentTimeInMillis) >= parseInt(startTime) && parseInt(currentTimeInMillis)<=parseInt(endTime)){
			//var tblRow = f.strt + + f.word + " </i> "
			//alert(f.word);
			 //$("#red").attr();
			 //$("#"+startTime).removeAttr("style");
			 //$("#"+startTime).attr("style", "background-color:white");
			//$("#"+startTime).attr("style", "background-color:blue");
			 $("#"+startTime).effect( "highlight", {color:"blue"});
			 //$("#"+startTime).animate({fontSize: '100px'}, "slow");
		  } /*else if(startTime == "" || endTime == ""){
		  //alert(startTime);
		  //$("#userdata p").text().highlight(f.word);
			// $("#"+f.strt).attr("style", "background-color:red");
		 }*/
           //$(tblRow).appendTo("#userdata p");
     });
		//alert(jsonWords.word[0]);
    });
	
	 /*$("i").click(function(event){
 alert("1");
        //$("p").removeAttr("style");
    });*/
    
    $("#speed").change(function(event){
        //var id = event.find('option:selected').attr('id');
       //alert(id);
         //alert(document.getElementById("speed").selected);
         //var speedId =$(':selected').attr('option:id');
         //alert(speedId);
          var id = $(this).val();
          alert(id);
        document.getElementById("spbibaudio").playbackRate=parseFloat(id);
        //$("#spbibaudio").attr("playbackRate",0.1);//parseFloat(id);
    });
    $("#checkSpeed").click(function(){
         alert($("#spbibaudio").get("playbackRate"));
        
    });

});
function replayWord(event){
var vid = document.getElementById("spbibaudio");
vid.currentTime = parseInt(event.id)/1000;
}
</script>
</body>
</html>
